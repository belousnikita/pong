(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{199:function(t,e,i){},200:function(t,e,i){"use strict";i.r(e);var a=i(11),s=i(2),r=i(3),n=i(6),o=i(5),h=i(7),c=i(1),u=i(0),l=i.n(u),d=i(78),v=i.n(d),m=i(29),f=function(){function t(e,i,a){Object(s.a)(this,t),this.x=e,this.y=i,this.radius=a,this.alpha=1,this.visible=!0}return Object(r.a)(t,[{key:"draw",value:function(t){var e=this.x,i=this.y,a=this.radius,s=this.alpha;t.beginPath(),t.arc(e,i,a,0,2*Math.PI,!1);var r="rgba(255, 255, 255, ".concat(s,")");return t.strokeStyle=r,t.fillStyle=r,t.fill(),this}},{key:"setRadius",value:function(t){return this.radius=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setColor",value:function(t){return this.color=t,this}},{key:"hide",value:function(){return this.visible=!1,this.alpha=1,this}},{key:"show",value:function(){return this.visible=!0,this}},{key:"setAlpha",value:function(t){this.alpha=t}}],[{key:"pointerActivity",value:function(t){var e=this.state,i=e.userPaddle,a=e.computerPaddle,s=e.wave;i.intersectsCircle(t)||a.intersectsCircle(t)?t.show():s.intersectsCircle(t)?(t.setAlpha(.2),t.show()):t.hide()}},{key:"waveActivity",value:function(t){var e=this.state.ball,i=e.getDistance(t);if(i-10*e.radius<=0){t.show();var a=.8-i/e.radius/10;t.setAlpha(a<.5?a:.5)}else t.hide()}},{key:"calculateParams",value:function(t,e,i){var a=e/(2*t),s=Math.floor(a),r=i/(2*t),n=Math.floor(r);return{pureWCount:a,pureHCount:r,wCount:s,hCount:n,quantity:n*s}}},{key:"createNet",value:function(e,i,a){var s=a.hCount,r=a.wCount,n=a.pureWCount,o=function(t,e,i){var a=t/e%1===0?t/e:Math.ceil(t/e)-1,s=t+1>e?a:0;return{i:s,j:s>0?(e>=i?e:i)-(e*(s+1)-t+(e>i?1:0)+(e<i?i-e:-(e-i))):t}}(e,r,s),h=o.i,c=o.j;return(h%2===0?c%2===0:c%2!==0)?new t((n-r)*i+i+2*i*c,i+h*i*2,i):null}}]),t}(),y=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},b=function(t){function e(t,i,a,r,h){var c;return Object(s.a)(this,e),(c=Object(n.a)(this,Object(o.a)(e).call(this,i/2,a/2,r,"white"))).doubleRadius=2*r,c.centerX=i/2,c.centerY=a/2,c.game=t,c.maxX=i-r,c.maxY=a-r,c.minX=r,c.minY=r,c.speed=3,c.dx=c.speed*t.randomDirection(),c.dy=c.speed*t.randomDirection(),c.totalAcceleration=Math.abs(c.dx)+Math.abs(c.dy),c.acceleration=0,c.id=h,c}return Object(h.a)(e,t),Object(r.a)(e,[{key:"draw",value:function(t){var e=this.x,i=this.y,a=this.radius;return t.beginPath(),t.arc(e,i,a,0,2*Math.PI,!1),t.lineWidth=5,t.strokeStyle="rgba(255, 255, 255, 0.8)",t.fillStyle="rgba(255, 255, 255, 0.4)",t.stroke(),t.fill(),this}},{key:"regulateAcceleration",value:function(){var t=Math.abs(this.dx),e=Math.abs(this.dy),i=t+e;if(i<this.totalAcceleration){if(t<e){var a=this.totalAcceleration/i;this.dy*=a}}else i>this.totalAcceleration&&(t>e?this.dx*=.9:this.dy*=.9)}},{key:"update",value:function(t){var e=this.game.timeFrame/2e3,i=e>1?e:1;this.regulateAcceleration(),this.x=this.x+this.dx*i,this.y=this.y+this.dy*i,this.dx>0&&this.x>this.maxX?(this.x=this.maxX,t.setPos(this.x+this.radius,this.y),t.activate(),this.mirrorX()):this.dx<0&&this.x<this.minX&&(this.x=this.minX,t.setPos(this.x-this.radius,this.y),t.activate(),this.mirrorX()),this.dy>0&&this.y>this.maxY+4*this.radius?(this.y=this.maxY,this.mirrorY(),this.mirrorX(),this.reset(),this.game.lose()):this.dy<0&&this.y<this.minY-4*this.radius&&(this.y=this.minY,this.mirrorX(),this.mirrorY(),this.reset(),this.game.goal())}},{key:"mirrorX",value:function(){this.dx=-this.dx}},{key:"mirrorY",value:function(){this.dy=-this.dy}},{key:"setDx",value:function(t){this.dx=t}},{key:"reset",value:function(){this.x=this.centerX,this.y=this.centerY}},{key:"intersectsCircle",value:function(t){var e={x:this.x,y:this.y};return y(e,t)-this.radius<=0}},{key:"getDistance",value:function(t){var e={x:this.x,y:this.y};return y(e,t)}}],[{key:"ballActivity",value:function(t){var e=this.state,i=e.userPaddle,a=e.computerPaddle,s=e.wave,r=i.x,n=a.x;this.game.predict(t);var o=this.game.prediction;if(o&&(a.x+t.radius<o.x?this.moveComputerRight():a.x-t.radius>o.x&&this.moveComputerLeft()),i.intersectsCircle(t)){var h=r-t.x;s.setPos(t.x,t.y+t.radius),s.activate(),i.lock(10),t.setY(i.y-t.doubleRadius),t.setDx(t.dx+-.1*h),t.mirrorY()}if(a.intersectsCircle(t)){var c=n-t.x;s.setPos(t.x,t.y-t.radius),s.activate(),a.lock(10),t.setY(a.y+t.doubleRadius),t.setDx(t.dx+-.1*c),t.mirrorY()}t.update(s)}}]),e}(f),p=function(){function t(e,i,a,r,n){Object(s.a)(this,t),this.x=e,this.y=i,this.radius=0,this.width=a,this.margin=-a,this.maxRadius=r,this.id=n,this.visible=!1,this.active=!1}return Object(r.a)(t,[{key:"increaseRadius",value:function(){this.radius+=2,this.margin+=3.2}},{key:"resetRadius",value:function(){this.radius=0,this.margin=-this.width}},{key:"stop",value:function(){this.active=!1}},{key:"activate",value:function(){this.active=!0}},{key:"setPos",value:function(t,e){this.resetRadius(),this.x=t,this.y=e}},{key:"intersectsCircle",value:function(t){var e,i,a={x:this.x,y:this.y},s=(e=a,i=t,Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)));return s-this.radius<=0&&s>this.margin}}],[{key:"animation",value:function(t){t.active&&(t.increaseRadius(),t.radius>t.maxRadius&&(t.stop(),t.resetRadius()))}}]),t}(),k=function(){function t(e,i,a,r,n,o){Object(s.a)(this,t),this.x=e,this.y=i,this.width=a,this.height=r,this.speed=n,this.id=o,this.locked=0}return Object(r.a)(t,[{key:"moveRight",value:function(){this.x=this.x+this.speed}},{key:"moveLeft",value:function(){this.x=this.x-this.speed}},{key:"lock",value:function(t){this.locked+=t}},{key:"tick",value:function(){this.locked>0&&(this.locked-=1)}},{key:"unlock",value:function(){this.locked=0}},{key:"intersectsCircle",value:function(t){var e=Math.abs(t.x-this.x),i=Math.abs(t.y-this.y);return!(e>this.width/2+t.radius)&&(!(i>this.height/2+t.radius)&&(e<=this.width/2||(i<=this.height/2||Math.pow(e-this.width/2,2)+Math.pow(i-this.height/2,2)<=Math.pow(t.radius,2))))}}],[{key:"createPaddle",value:function(e,i,a,s,r){var n=a*i/3e4;return e>1?null:0===e?new t(i/2,a-s,i/4,r,n,"user"):new t(i/2,0+s,i/4,r,n,"computer")}}]),t}(),g=function(){function t(){Object(s.a)(this,t),this.pressedKeys=[]}return Object(r.a)(t,[{key:"keyDown",value:function(t){var e=t||window.event;this.pressedKeys[e.keyCode]=1}},{key:"keyUp",value:function(t){var e=t||window.event;delete this.pressedKeys[e.keyCode]}},{key:"holdEvents",value:function(t){for(var e in this.pressedKeys)t(e)}}],[{key:"moveOnKeyPress",value:function(t){"65"!==t&&"37"!==t?"68"!==t&&"39"!==t||this.moveUserRight():this.moveUserLeft()}}]),t}(),w=function(){function t(){Object(s.a)(this,t)}return Object(r.a)(t,null,[{key:"moveUserLeft",value:function(){var t=this.state.userPaddle;if(t.locked<=0){var e=this.state.move;t.x-t.width/2>=0?t.moveLeft():e&&this.setState({move:!1})}}},{key:"moveUserRight",value:function(){var t=this.state.userPaddle;if(t.locked<=0){var e=this.state,i=e.width,a=e.move;t.x+t.width/2<=i?t.moveRight():a&&this.setState({move:!1})}}},{key:"moveComputerRight",value:function(){var t=this.state,e=t.computerPaddle,i=t.width;e.locked<=0&&e.x+e.width/2<=i&&e.moveRight()}},{key:"moveComputerLeft",value:function(){var t=this.state.computerPaddle;t.locked<=0&&t.x-t.width/2>=0&&t.moveLeft()}},{key:"makeUserMove",value:function(){var t=this.state,e=t.left,i=t.right;e&&i||(e&&this.moveUserLeft(),i&&this.moveUserRight())}}]),t}(),x=(i(76),function(t){function e(t){var i;Object(s.a)(this,e),(i=Object(n.a)(this,Object(o.a)(e).call(this,t))).ref=l.a.createRef(),i.upper=l.a.createRef();var a=t.width,r=t.height;return i.state={width:a,height:r},i}return Object(h.a)(e,t),Object(r.a)(e,[{key:"componentDidUpdate",value:function(){var t=this.ref.current,e=this.upper.current.getContext("2d"),i=function(t){var e=window.devicePixelRatio||1,i=t.getBoundingClientRect();t.width=i.width*e,t.height=i.height*e;var a=t.getContext("2d");return a.scale(e,e),a}(t),a=this.props,s=a.bg,r=a.blurredBg;s&&r&&(s.setContext(i,"dots"),r.setContext(e,"blurredDots"),r.setContext(e,"backDots"),r.stop("backDots"),s.setContext(i,"paddles"),s.getLayer("paddles").hide(),s.setContext(i,"ballLayer"),s.setContext(e,"waveLayer"))}},{key:"render",value:function(){var t=this.props,e=t.width,i=t.height;return l.a.createElement("div",null,l.a.createElement("canvas",{className:"upper",ref:this.upper,width:e,height:i}),l.a.createElement("canvas",{ref:this.ref,width:e,height:i}))}}]),e}(l.a.Component)),O=(i(77),function(t){function e(){return Object(s.a)(this,e),Object(n.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){var t=this.props,e=t.width,i=t.height,a=t.startGame,s={width:e,height:i};return l.a.createElement("div",{className:"starter",style:s},l.a.createElement("p",{className:"header start",onClick:function(){return a()}},"Start"))}}]),e}(l.a.Component)),j=function(t){function e(){return Object(s.a)(this,e),Object(n.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){return l.a.createElement("div",{className:"description"},l.a.createElement("h1",{className:"header"},"Pong"),l.a.createElement("p",{className:"ctrl"},"Controls:"),l.a.createElement("p",{className:"desc"},l.a.createElement("i",{className:"fas fa-arrow-left"}),", A \u2014 Move left"),l.a.createElement("p",{className:"desc"},l.a.createElement("i",{className:"fas fa-arrow-right"}),", D \u2014 Move right"))}}]),e}(l.a.Component),C=i(19),M=i.n(C),P=(i(199),function(t){function e(){return Object(s.a)(this,e),Object(n.a)(this,Object(o.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(r.a)(e,[{key:"render",value:function(){var t=this.props,e=t.moveSwitcher,i=t.leftState,a=t.rightState,s=M()("left",{active:i}),r=M()("right",{active:a});return l.a.createElement("div",{className:"controls"},l.a.createElement("button",{type:"button",className:s,onTouchStart:function(){return e("left",!0)},onTouchMove:function(){return e("left",!0)},onMouseDown:function(){return e("left",!0)},onMouseUp:function(){return e("left",!1)},onTouchEnd:function(){return e("left",!1)}},l.a.createElement("i",{className:"fas fa-arrow-left"})),l.a.createElement("button",{type:"button",className:r,onTouchStart:function(){return e("right",!0)},onTouchMove:function(){return e("right",!0)},onMouseDown:function(){return e("right",!0)},onMouseUp:function(){return e("right",!1)},onTouchEnd:function(){return e("right",!1)}},l.a.createElement("i",{className:"fas fa-arrow-right"})))}}]),e}(l.a.Component)),E=function(){function t(){Object(s.a)(this,t),this.difficulty=1,this.score={user:0,computer:0},this.timeFrame=0,this.loosed=!1,this.aiReaction=5,this.aiError=10,this.since=0,this.prediction={x:0,y:0}}return Object(r.a)(t,[{key:"random",value:function(t,e){return t+Math.random()*(e-t)}},{key:"tick",value:function(){this.timeFrame+=1}},{key:"lose",value:function(){this.score.computer+=1,this.timeFrame=0}},{key:"goal",value:function(){this.score.user+=1,this.timeFrame=0}},{key:"randomDirection",value:function(){return Math.random()-.5>=0?1:-1}},{key:"predict",value:function(t){if(this.timeFrame%this.aiError===0&&t.dy<0){var e=this.random(1,this.aiReaction),i=t.x+t.dx*e,a=t.y+t.dy*e;this.prediction.x!==i&&this.prediction.y!==a&&(this.prediction={x:i,y:a})}}}]),t}(),D=function(t){function e(t){var i;return Object(s.a)(this,e),(i=Object(n.a)(this,Object(o.a)(e).call(this,t))).field=l.a.createRef(),i.state={width:0,height:0,move:!1,isMobile:!1,isStarted:!1,isLoosed:!1,userPaddle:null,computerPaddle:null,ball:null,wave:null},i.bg=new m.a,i.blurredBg=new m.a,i.staticBg=new m.a,i.keyholder=new g,i.game=new E,i.tick=i.tick.bind(Object(c.a)(Object(c.a)(i))),i.updateFieldDimensions=i.updateFieldDimensions.bind(Object(c.a)(Object(c.a)(i))),i.waveActivity=f.waveActivity.bind(Object(c.a)(Object(c.a)(i))),i.pointerActivity=f.pointerActivity.bind(Object(c.a)(Object(c.a)(i))),i.ballActivity=b.ballActivity.bind(Object(c.a)(Object(c.a)(i))),i.moveUserLeft=w.moveUserLeft.bind(Object(c.a)(Object(c.a)(i))),i.moveUserRight=w.moveUserRight.bind(Object(c.a)(Object(c.a)(i))),i.makeUserMove=w.makeUserMove.bind(Object(c.a)(Object(c.a)(i))),i.moveComputerLeft=w.moveComputerLeft.bind(Object(c.a)(Object(c.a)(i))),i.moveComputerRight=w.moveComputerRight.bind(Object(c.a)(Object(c.a)(i))),i.moveOnKeyPress=g.moveOnKeyPress.bind(Object(c.a)(Object(c.a)(i))),i.moveSwitcher=i.moveSwitcher.bind(Object(c.a)(Object(c.a)(i))),i.startGame=i.startGame.bind(Object(c.a)(Object(c.a)(i))),i}return Object(h.a)(e,t),Object(r.a)(e,[{key:"updateDots",value:function(t,e){var i=this,a=this.state.isMobile?18:20,s=function(t,e){return f.createNet(t,a,e)};if(t&&e){var r=f.calculateParams(2,t,e),n=f.calculateParams(a,t,e);this.bg.createLayer("dots",null,function(t){return function(t,e){return f.createNet(t,2,e)}(t,r)},r.quantity,function(t){return i.pointerActivity(t)}),this.blurredBg.createLayer("backDots",null,function(t){return s(t,n)},n.quantity).applyOnEach(function(t){return t.setAlpha(.08)}),this.blurredBg.createLayer("blurredDots",null,function(t){return s(t,n)},n.quantity,function(t){return i.waveActivity(t)}),this.bg.createLayer("paddles",null,function(i){return k.createPaddle(i,t,e,4,20)},2),this.bg.createLayer("ballLayer",null,function(){return new b(i.game,t,e,t/50,"ball")},1,function(t){return i.ballActivity(t)}),this.bg.createLayer("waveLayer",null,function(){return new p(t/2,e/2,25,t/5,"wave")},1,function(t){return p.animation(t)});var o=this.bg.getLayer("paddles"),h=o.getFigure("user"),c=o.getFigure("computer"),u=this.bg.getFigure("ballLayer","ball"),l=this.bg.getFigure("waveLayer","wave");this.setState({userPaddle:h,computerPaddle:c,ball:u,wave:l})}}},{key:"componentDidMount",value:function(){var t=this;setInterval(function(){return t.keyholder.holdEvents(t.moveOnKeyPress)},20),this.updateFieldDimensions(),this.updateDots(),requestAnimationFrame(this.tick)}},{key:"updateFieldDimensions",value:function(){if(this.field){var t=this.field.current.clientWidth||0,e=this.field.current.clientHeight||0,i=t<425;t===this.state.width&&e===this.state.height||(this.updateDots(t,e),this.setState({width:t,height:e,isMobile:i}))}}},{key:"tick",value:function(){var t=this.state,e=t.isStarted,i=t.isLoosed,a=t.computerPaddle,s=t.userPaddle;if(this.updateFieldDimensions(),e){this.makeUserMove(),this.bg.animate().draw(),this.blurredBg.animate().draw(),this.game.tick(),a.tick(),s.tick();var r=this.game.loosed;i!==r&&this.setState({isLoosed:r})}requestAnimationFrame(this.tick)}},{key:"moveSwitcher",value:function(t,e){this.setState(Object(a.a)({},t,e))}},{key:"startGame",value:function(){this.setState({isStarted:!0})}},{key:"render",value:function(){var t=this,e=this.state,i=e.width,a=e.height,s=e.left,r=e.right,n=e.isMobile,o=e.isStarted,h=e.isLoosed,c=M()("background",{started:o&&!h,loosed:h});return l.a.createElement("div",{className:"pong",tabIndex:"0",onKeyDown:function(e){return t.keyholder.keyDown(e)},onKeyUp:function(e){return t.keyholder.keyUp(e)}},l.a.createElement("div",{className:c}),!n&&l.a.createElement(j,null),l.a.createElement("div",{className:"field",ref:this.field},!o&&l.a.createElement(O,{width:i,height:a,startGame:this.startGame}),l.a.createElement(x,{width:i,height:a,bg:this.bg,blurredBg:this.blurredBg,updater:this.updateFieldDimensions})),n&&l.a.createElement(P,{leftState:s,rightState:r,moveSwitcher:this.moveSwitcher}))}}]),e}(l.a.Component),L=document.getElementById("root");v.a.render(l.a.createElement(D,null),L)},76:function(t,e,i){},77:function(t,e,i){},81:function(t,e,i){t.exports=i(200)}},[[81,1,2]]]);
//# sourceMappingURL=main.a250a21f.chunk.js.map